{"remainingRequest":"/Users/hanyue/development/github/vue-components/node_modules/babel-loader/lib/index.js!/Users/hanyue/development/github/vue-components/node_modules/eslint-loader/index.js??ref--13-0!/Users/hanyue/development/github/vue-components/src/package/kVuex/KVuex.js","dependencies":[{"path":"/Users/hanyue/development/github/vue-components/src/package/kVuex/KVuex.js","mtime":1578362790992},{"path":"/Users/hanyue/development/github/vue-components/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hanyue/development/github/vue-components/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hanyue/development/github/vue-components/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvaGFueXVlL2RldmVsb3BtZW50L2dpdGh1Yi92dWUtY29tcG9uZW50cy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9Vc2Vycy9oYW55dWUvZGV2ZWxvcG1lbnQvZ2l0aHViL3Z1ZS1jb21wb25lbnRzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7Ci8vIDEu5YiG5Lik6YOo5YiGIOS4gOS4quaYryDmnoTlu7pTdG9yZeeahOWunuS+iyDkuIDkuKrmmK8g5p6E5bu6aW5zdGFsbOe7hOS7tgovLyAyLlN0b3JlIOimgeWunueOsCBjb21taXQgZGlzcGF0Y2ggc3RhdGUg5bm25LiU5oqKc3RhdGXnvJbnqIvlk43lupTlvI/mlbDmja4KLy8gMy5pbnN0YWxsIOimgeWunueOsOaMgui9vSRTdG9yZeWIsOWFqOWxgAovLyA0LuWunueOsGdldHRlciDliKnnlKhWdWXnmoTorqHnrpflsZ7mgKcKdmFyIFZ1ZTsKCnZhciBTdG9yZSA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIFN0b3JlKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0b3JlKTsKCiAgICB2YXIgZGlzcGF0Y2ggPSB0aGlzLmRpc3BhdGNoLAogICAgICAgIGNvbW1pdCA9IHRoaXMuY29tbWl0OyAvLyDkuLptdXRhdGlvbnMg5LiOIGFjdGlvbnPotYvlgLwKCiAgICB0aGlzLl9tdXRhdGlvbnMgPSBvcHRpb25zLm11dGF0aW9uczsKICAgIHRoaXMuX2FjdGlvbnMgPSBvcHRpb25zLmFjdGlvbnM7CiAgICB0aGlzLl93YXBwZXJHZXR0ZXIgPSBvcHRpb25zLmdldHRlcnM7CiAgICB2YXIgc3RvcmUgPSB0aGlzOwogICAgdmFyIGNvbXB1dGVkID0ge307CiAgICB0aGlzLmdldHRlcnMgPSB7fTsKICAgIE9iamVjdC5rZXlzKHRoaXMuX3dhcHBlckdldHRlcikuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgIHZhciBmbiA9IHN0b3JlLl93YXBwZXJHZXR0ZXJba2V5XTsKCiAgICAgIGNvbXB1dGVkW2tleV0gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIGZuKHN0b3JlLnN0YXRlKTsKICAgICAgfTsKCiAgICAgIE9iamVjdC5rZXlzKF90aGlzLl93YXBwZXJHZXR0ZXIpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdG9yZS5nZXR0ZXJzLCBrZXksIHsKICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgICByZXR1cm4gc3RvcmUuX3ZtW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSk7CiAgICB3aW5kb3cuY29uc29sZS5sb2coc3RvcmUuZ2V0dGVycyk7IC8vIOWumuS5iXN0YXRlCiAgICAvLyDlsIZzdGF0Zee8lueoi+WTjeW6lOW8j+aVsOaNrgogICAgLy8g5bm25Yqg5LiA5bGCIOS9v+eUqCBnZXQg6Zi75q2ic3RhdGXooqvkv67mlLkg5L2/55SoJCTmmK/lm6DkuLrkuI3kvJrooqt2dWXop6PmnpAKCiAgICB0aGlzLl92bSA9IG5ldyBWdWUoewogICAgICBkYXRhOiB7CiAgICAgICAgJCRzdGF0ZTogb3B0aW9ucy5zdGF0ZQogICAgICB9LAogICAgICBjb21wdXRlZDogY29tcHV0ZWQKICAgIH0pOwoKICAgIHRoaXMuY29tbWl0ID0gZnVuY3Rpb24gKHR5cGUsIHBheWxvYWQpIHsKICAgICAgcmV0dXJuIGNvbW1pdC5jYWxsKHN0b3JlLCB0eXBlLCBwYXlsb2FkKTsKICAgIH07CgogICAgdGhpcy5kaXNwYXRjaCA9IGZ1bmN0aW9uICh0eXBlLCBwYXlsb2FkKSB7CiAgICAgIHJldHVybiBkaXNwYXRjaC5jYWxsKHN0b3JlLCB0eXBlLCBwYXlsb2FkKTsKICAgIH07CiAgfQoKICBfY3JlYXRlQ2xhc3MoU3RvcmUsIFt7CiAgICBrZXk6ICJjb21taXQiLAogICAgLy8gX3R5cGUg6KGo56S657G75Z6LIF9wYXlsb2FkIOi9veiNtyDnlKjmnaXooajnpLrlj4LmlbAKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21taXQoX3R5cGUsIF9wYXlsb2FkKSB7CiAgICAgIHRoaXMuX211dGF0aW9uc1tfdHlwZV0odGhpcy5zdGF0ZSwgX3BheWxvYWQpOwogICAgfQogIH0sIHsKICAgIGtleTogImRpc3BhdGNoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwYXRjaChfdHlwZSwgX3BheWxvYWQpIHsKICAgICAgdGhpcy5fYWN0aW9uc1tfdHlwZV0odGhpcywgX3BheWxvYWQpOwogICAgfQogIH0sIHsKICAgIGtleTogInN0YXRlIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fdm0uX2RhdGEuJCRzdGF0ZTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2KSB7CiAgICAgIHdpbmRvdy5jb25zb2xlLmVycm9yKCfkuI3opoHnm7TmjqXkv67mlLlzdGF0ZScpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFN0b3JlOwp9KCk7Cgp2YXIgaW5zdGFsbCA9IGZ1bmN0aW9uIGluc3RhbGwoX1Z1ZSkgewogIFZ1ZSA9IF9WdWU7IC8v5L2/55SobWl4aW4sIOaLv+WIsOWunuS+i+WQjueahOebuOWFs+WxnuaAp+W5tuaMgui9veWIsHByb3RvdHlwZeS4igoKICBWdWUubWl4aW4oewogICAgYmVmb3JlQ3JlYXRlOiBmdW5jdGlvbiBiZWZvcmVDcmVhdGUoKSB7CiAgICAgIC8vIOaLv+WIsHZ1ZeaMgui9veWIsOaJgOacieWxnuaApyDku6XlkI7lj6/ku6Xkvb/nlKh0aGlzLiRzdG9yZeiwg+eUqOWunuS+iwogICAgICBpZiAodGhpcy4kb3B0aW9ucy5zdG9yZSkgewogICAgICAgIFZ1ZS5wcm90b3R5cGUuJFN0b3JlID0gdGhpcy4kb3B0aW9ucy5zdG9yZTsKICAgICAgfQogICAgfQogIH0pOwp9OwoKZXhwb3J0IGRlZmF1bHQgewogIFN0b3JlOiBTdG9yZSwKICBpbnN0YWxsOiBpbnN0YWxsCn07"},{"version":3,"sources":["/Users/hanyue/development/github/vue-components/src/package/kVuex/KVuex.js"],"names":["Vue","Store","options","dispatch","commit","_mutations","mutations","_actions","actions","_wapperGetter","getters","store","computed","Object","keys","forEach","key","fn","state","defineProperty","get","_vm","window","console","log","data","$$state","type","payload","call","_type","_payload","_data","v","error","install","_Vue","mixin","beforeCreate","$options","prototype","$Store"],"mappings":"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","sourcesContent":["// 1.分两部分 一个是 构建Store的实例 一个是 构建install组件\n// 2.Store 要实现 commit dispatch state 并且把state编程响应式数据\n// 3.install 要实现挂载$Store到全局\n// 4.实现getter 利用Vue的计算属性\n\n\nlet Vue;\n\nclass Store {\n    constructor(options = {}) {\n        const { dispatch, commit } = this;\n\n        // 为mutations 与 actions赋值\n        this._mutations = options.mutations;\n        this._actions = options.actions;\n        this._wapperGetter = options.getters;\n\n        const store = this;\n        const computed = {};\n        this.getters = {};\n        Object.keys(this._wapperGetter).forEach(key => {\n            let fn = store._wapperGetter[key];\n            computed[key] = function() {\n                return fn(store.state);\n            };\n\n            Object.keys(this._wapperGetter).forEach(key => {\n                Object.defineProperty(store.getters, key, {\n                    get: () => store._vm[key]\n                });\n            });\n        });\n\n        window.console.log(store.getters);\n\n        // 定义state\n        // 将state编程响应式数据\n        // 并加一层 使用 get 阻止state被修改 使用$$是因为不会被vue解析\n        this._vm = new Vue({\n            data: {\n                $$state: options.state\n            },\n            computed\n        });\n        \n        this.commit = function(type, payload) {\n            return commit.call(store, type, payload);\n        }\n        this.dispatch = function(type, payload) {\n            return dispatch.call(store, type, payload);\n        }\n    }\n\n    get state() {\n        return this._vm._data.$$state\n    }\n\n    set state (v) {\n        window.console.error('不要直接修改state');\n    }\n     \n\n    // _type 表示类型 _payload 载荷 用来表示参数\n    commit(_type, _payload) {\n        this._mutations[_type](this.state, _payload);\n    }\n\n    dispatch(_type, _payload) {\n        this._actions[_type](this, _payload);\n    }\n}\n\nconst install = function(_Vue) {\n    Vue = _Vue;\n\n    //使用mixin, 拿到实例后的相关属性并挂载到prototype上\n    Vue.mixin({\n        beforeCreate() {\n            // 拿到vue挂载到所有属性 以后可以使用this.$store调用实例\n            if (this.$options.store) {\n                Vue.prototype.$Store = this.$options.store;\n            }\n        }\n    })\n}\n\nexport default {\n    Store,\n    install\n}"]}]}
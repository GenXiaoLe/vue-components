{"remainingRequest":"/Users/hanyue/development/github/vue-components/node_modules/babel-loader/lib/index.js!/Users/hanyue/development/github/vue-components/node_modules/eslint-loader/index.js??ref--13-0!/Users/hanyue/development/github/vue-components/src/package/kVuex/KVuex.js","dependencies":[{"path":"/Users/hanyue/development/github/vue-components/src/package/kVuex/KVuex.js","mtime":1578106004886},{"path":"/Users/hanyue/development/github/vue-components/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hanyue/development/github/vue-components/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hanyue/development/github/vue-components/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvaGFueXVlL2RldmVsb3BtZW50L2dpdGh1Yi92dWUtY29tcG9uZW50cy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9Vc2Vycy9oYW55dWUvZGV2ZWxvcG1lbnQvZ2l0aHViL3Z1ZS1jb21wb25lbnRzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7Ci8vIDEu5YiG5Lik6YOo5YiGIOS4gOS4quaYryDmnoTlu7pTdG9yZeeahOWunuS+iyDkuIDkuKrmmK8g5p6E5bu6aW5zdGFsbOe7hOS7tgovLyAyLlN0b3JlIOimgeWunueOsCBjb21taXQgZGlzcGF0Y2ggc3RhdGUg5bm25LiU5oqKc3RhdGXnvJbnqIvlk43lupTlvI/mlbDmja4KLy8gMy5pbnN0YWxsIOimgeWunueOsOaMgui9vSRTdG9yZeWIsOWFqOWxgAp2YXIgVnVlOwoKdmFyIFN0b3JlID0KLyojX19QVVJFX18qLwpmdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gU3RvcmUoKSB7CiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0b3JlKTsKCiAgICB2YXIgc3RvcmUgPSB0aGlzOwogICAgdmFyIGRpc3BhdGNoID0gdGhpcy5kaXNwYXRjaCwKICAgICAgICBjb21taXQgPSB0aGlzLmNvbW1pdDsgLy8g5a6a5LmJc3RhdGUKICAgIC8vIOWwhnN0YXRl57yW56iL5ZON5bqU5byP5pWw5o2uCiAgICAvLyDlubbliqDkuIDlsYIg5L2/55SoIGdldCDpmLvmraJzdGF0Zeiiq+S/ruaUuSDkvb/nlKgkJOaYr+WboOS4uuS4jeS8muiiq3Z1Zeino+aekAoKICAgIHRoaXMuX3ZtID0gbmV3IFZ1ZSh7CiAgICAgIGRhdGE6IHsKICAgICAgICAkJHN0YXRlOiBvcHRpb25zLnN0YXRlCiAgICAgIH0KICAgIH0pOyAvLyDkuLptdXRhdGlvbnMg5LiOIGFjdGlvbnPotYvlgLwKCiAgICBzdG9yZS5fbXV0YXRpb25zID0gb3B0aW9ucy5tdXRhdGlvbnM7CiAgICBzdG9yZS5fYWN0aW9ucyA9IG9wdGlvbnMuYWN0aW9uczsKCiAgICBzdG9yZS5jb21taXQgPSBmdW5jdGlvbiAodHlwZSwgcGF5bG9hZCkgewogICAgICByZXR1cm4gY29tbWl0LmNhbGwoc3RvcmUsIHR5cGUsIHBheWxvYWQpOwogICAgfTsKCiAgICBzdG9yZS5kaXNwYXRjaCA9IGZ1bmN0aW9uICh0eXBlLCBwYXlsb2FkKSB7CiAgICAgIHJldHVybiBkaXNwYXRjaC5jYWxsKHN0b3JlLCB0eXBlLCBwYXlsb2FkKTsKICAgIH07CiAgfQoKICBfY3JlYXRlQ2xhc3MoU3RvcmUsIFt7CiAgICBrZXk6ICJjb21taXQiLAogICAgLy8gX3R5cGUg6KGo56S657G75Z6LIF9wYXlsb2FkIOi9veiNtyDnlKjmnaXooajnpLrlj4LmlbAKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21taXQoX3R5cGUsIF9wYXlsb2FkKSB7CiAgICAgIHRoaXMuX211dGF0aW9uc1tfdHlwZV0odGhpcy5zdGF0ZSwgX3BheWxvYWQpOwogICAgfQogIH0sIHsKICAgIGtleTogImRpc3BhdGNoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwYXRjaChfdHlwZSwgX3BheWxvYWQpIHsKICAgICAgdGhpcy5fYWN0aW9uc1tfdHlwZV0odGhpcywgX3BheWxvYWQpOwogICAgfQogIH0sIHsKICAgIGtleTogInN0YXRlIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fdm0uX2RhdGEuJCRzdGF0ZTsKICAgIH0sCiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2KSB7CiAgICAgIHdpbmRvdy5jb25zb2xlLmVycm9yKCfkuI3opoHnm7TmjqXkv67mlLlzdGF0ZScpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFN0b3JlOwp9KCk7Cgp2YXIgaW5zdGFsbCA9IGZ1bmN0aW9uIGluc3RhbGwoX1Z1ZSkgewogIFZ1ZSA9IF9WdWU7IC8v5L2/55SobWl4aW4sIOaLv+WIsOWunuS+i+WQjueahOebuOWFs+WxnuaAp+W5tuaMgui9veWIsHByb3RvdHlwZeS4igoKICBWdWUubWl4aW4oewogICAgYmVmb3JlQ3JlYXRlOiBmdW5jdGlvbiBiZWZvcmVDcmVhdGUoKSB7CiAgICAgIC8vIOaLv+WIsHZ1ZeaMgui9veWIsOaJgOacieWxnuaApyDku6XlkI7lj6/ku6Xkvb/nlKh0aGlzLiRzdG9yZeiwg+eUqOWunuS+iwogICAgICBpZiAodGhpcy4kb3B0aW9ucy5zdG9yZSkgewogICAgICAgIFZ1ZS5wcm90b3R5cGUuJFN0b3JlID0gdGhpcy4kb3B0aW9ucy5zdG9yZTsKICAgICAgfQogICAgfQogIH0pOwp9OwoKZXhwb3J0IGRlZmF1bHQgewogIFN0b3JlOiBTdG9yZSwKICBpbnN0YWxsOiBpbnN0YWxsCn07"},{"version":3,"sources":["/Users/hanyue/development/github/vue-components/src/package/kVuex/KVuex.js"],"names":["Vue","Store","options","store","dispatch","commit","_vm","data","$$state","state","_mutations","mutations","_actions","actions","type","payload","call","_type","_payload","_data","v","window","console","error","install","_Vue","mixin","beforeCreate","$options","prototype","$Store"],"mappings":";;AAAA;AACA;AACA;AAEA,IAAIA,GAAJ;;IAEMC,K;;;AACF,mBAA0B;AAAA,QAAdC,OAAc,uEAAJ,EAAI;;AAAA;;AACtB,QAAMC,KAAK,GAAG,IAAd;AADsB,QAEdC,QAFc,GAEO,IAFP,CAEdA,QAFc;AAAA,QAEJC,MAFI,GAEO,IAFP,CAEJA,MAFI,EAGtB;AACA;AACA;;AACA,SAAKC,GAAL,GAAW,IAAIN,GAAJ,CAAQ;AACfO,MAAAA,IAAI,EAAE;AACFC,QAAAA,OAAO,EAAEN,OAAO,CAACO;AADf;AADS,KAAR,CAAX,CANsB,CAYtB;;AACAN,IAAAA,KAAK,CAACO,UAAN,GAAmBR,OAAO,CAACS,SAA3B;AACAR,IAAAA,KAAK,CAACS,QAAN,GAAiBV,OAAO,CAACW,OAAzB;;AAEAV,IAAAA,KAAK,CAACE,MAAN,GAAe,UAASS,IAAT,EAAeC,OAAf,EAAwB;AACnC,aAAOV,MAAM,CAACW,IAAP,CAAYb,KAAZ,EAAmBW,IAAnB,EAAyBC,OAAzB,CAAP;AACH,KAFD;;AAGAZ,IAAAA,KAAK,CAACC,QAAN,GAAiB,UAASU,IAAT,EAAeC,OAAf,EAAwB;AACrC,aAAOX,QAAQ,CAACY,IAAT,CAAcb,KAAd,EAAqBW,IAArB,EAA2BC,OAA3B,CAAP;AACH,KAFD;AAGH;;;;AAWD;2BACOE,K,EAAOC,Q,EAAU;AACpB,WAAKR,UAAL,CAAgBO,KAAhB,EAAuB,KAAKR,KAA5B,EAAmCS,QAAnC;AACH;;;6BAEQD,K,EAAOC,Q,EAAU;AACtB,WAAKN,QAAL,CAAcK,KAAd,EAAqB,IAArB,EAA2BC,QAA3B;AACH;;;wBAhBW;AACR,aAAO,KAAKZ,GAAL,CAASa,KAAT,CAAeX,OAAtB;AACH,K;sBAEUY,C,EAAG;AACVC,MAAAA,MAAM,CAACC,OAAP,CAAeC,KAAf,CAAqB,aAArB;AACH;;;;;;AAaL,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAASC,IAAT,EAAe;AAC3BzB,EAAAA,GAAG,GAAGyB,IAAN,CAD2B,CAG3B;;AACAzB,EAAAA,GAAG,CAAC0B,KAAJ,CAAU;AACNC,IAAAA,YADM,0BACS;AACX;AACA,UAAI,KAAKC,QAAL,CAAczB,KAAlB,EAAyB;AACrBH,QAAAA,GAAG,CAAC6B,SAAJ,CAAcC,MAAd,GAAuB,KAAKF,QAAL,CAAczB,KAArC;AACH;AACJ;AANK,GAAV;AAQH,CAZD;;AAcA,eAAe;AACXF,EAAAA,KAAK,EAALA,KADW;AAEXuB,EAAAA,OAAO,EAAPA;AAFW,CAAf","sourcesContent":["// 1.分两部分 一个是 构建Store的实例 一个是 构建install组件\n// 2.Store 要实现 commit dispatch state 并且把state编程响应式数据\n// 3.install 要实现挂载$Store到全局\n\nlet Vue;\n\nclass Store {\n    constructor(options = {}) {\n        const store = this;\n        const { dispatch, commit } = this;\n        // 定义state\n        // 将state编程响应式数据\n        // 并加一层 使用 get 阻止state被修改 使用$$是因为不会被vue解析\n        this._vm = new Vue({\n            data: {\n                $$state: options.state\n            },\n        })\n\n        // 为mutations 与 actions赋值\n        store._mutations = options.mutations;\n        store._actions = options.actions;\n        \n        store.commit = function(type, payload) {\n            return commit.call(store, type, payload);\n        }\n        store.dispatch = function(type, payload) {\n            return dispatch.call(store, type, payload);\n        }\n    }\n\n    get state() {\n        return this._vm._data.$$state\n    }\n\n    set state (v) {\n        window.console.error('不要直接修改state');\n    }\n     \n\n    // _type 表示类型 _payload 载荷 用来表示参数\n    commit(_type, _payload) {\n        this._mutations[_type](this.state, _payload);\n    }\n\n    dispatch(_type, _payload) {\n        this._actions[_type](this, _payload);\n    }\n}\n\nconst install = function(_Vue) {\n    Vue = _Vue;\n\n    //使用mixin, 拿到实例后的相关属性并挂载到prototype上\n    Vue.mixin({\n        beforeCreate() {\n            // 拿到vue挂载到所有属性 以后可以使用this.$store调用实例\n            if (this.$options.store) {\n                Vue.prototype.$Store = this.$options.store;\n            }\n        }\n    })\n}\n\nexport default {\n    Store,\n    install\n}"]}]}
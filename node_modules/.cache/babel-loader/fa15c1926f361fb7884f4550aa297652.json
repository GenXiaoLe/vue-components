{"remainingRequest":"/Users/hanyue/development/github/vue-components/node_modules/babel-loader/lib/index.js!/Users/hanyue/development/github/vue-components/node_modules/eslint-loader/index.js??ref--13-0!/Users/hanyue/development/github/vue-components/src/package/kVueRouter/KVueRouter.js","dependencies":[{"path":"/Users/hanyue/development/github/vue-components/src/package/kVueRouter/KVueRouter.js","mtime":1578026220981},{"path":"/Users/hanyue/development/github/vue-components/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hanyue/development/github/vue-components/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hanyue/development/github/vue-components/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvaGFueXVlL2RldmVsb3BtZW50L2dpdGh1Yi92dWUtY29tcG9uZW50cy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9Vc2Vycy9oYW55dWUvZGV2ZWxvcG1lbnQvZ2l0aHViL3Z1ZS1jb21wb25lbnRzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7Ci8vIDEuIOaehOW7uuS4gOS4quWunuS+iwovLyAyLiDlrp7kvovkuK3nm5HlkKzlnLDlnYDlj5jljJYsIOW5tuWTjeW6lOW8j+eahOa4suafk+eVjOmdogovLyAzLiDlrp7kvovkuK1pbnN0YWxs5a6e546w5LiA5Liq5o+S5Lu2LCDmjILovb3liLAkcm91dGVyCi8vIDQuIOWunueOsHJvdXRlci1saW5rIHJvdXRlci12aWV35Lik5Liq57uE5Lu2IAovLyDnlLPmmI7kuIDkuKpWdWXlj5jph48sIOmYsuatomltcG9ydOW8leWFpeWvvOiHtOaJk+WMheaXtuaKilZ1ZemHjeWkjeaJk+WMhei/m+WOuwp2YXIgVnVlOwoKdmFyIEtWdWVSb3V0ZXIgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBLVnVlUm91dGVyKG9wdGlvbnMpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBLVnVlUm91dGVyKTsKCiAgICB0aGlzLiRvcHRpb25zID0gb3B0aW9uczsgLy8g5YCf5YqpdnVl5ZON5bqU5byP5oqK5a6D5Y+Y5oiQ5ZON5bqU5byP5pWw5o2uCiAgICAvLyB0aGlzLmN1cnJlbnQgPSAnLyc7CgogICAgVnVlLnV0aWwuZGVmaW5lUmVhY3RpdmUodGhpcywgJ2N1cnJlbnQnLCB3aW5kb3cubG9jYXRpb24uaGFzaC5zbGljZSgxKSB8fCAnLycpOyAvLyDnm5HlkKzmi7/liLDlnLDlnYDlubbkv67mlLnlnLDlnYAKCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMuY3VycmVudEhhc2guYmluZCh0aGlzKSk7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIHRoaXMuY3VycmVudEhhc2guYmluZCh0aGlzKSk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoS1Z1ZVJvdXRlciwgW3sKICAgIGtleTogImN1cnJlbnRIYXNoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjdXJyZW50SGFzaCgpIHsKICAgICAgdGhpcy5jdXJyZW50ID0gd2luZG93LmxvY2F0aW9uLmhhc2guc2xpY2UoMSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gS1Z1ZVJvdXRlcjsKfSgpOwoKS1Z1ZVJvdXRlci5pbnN0YWxsID0gZnVuY3Rpb24gKF9WdWUpIHsKICBWdWUgPSBfVnVlOyAvL+S9v+eUqG1peGluLCDmi7/liLDlrp7kvovlkI7nmoTnm7jlhbPlsZ7mgKflubbmjILovb3liLBwcm90b3R5cGXkuIoKCiAgVnVlLm1peGluKHsKICAgIGJlZm9yZUNyZWF0ZTogZnVuY3Rpb24gYmVmb3JlQ3JlYXRlKCkgewogICAgICAvLyDmi7/liLB2dWXmjILovb3liLDmiYDmnInlsZ7mgKcg5Lul5ZCO5Y+v5Lul5L2/55SodGhpcy4kcm91dGVy6LCD55So5a6e5L6LCiAgICAgIGlmICh0aGlzLiRvcHRpb25zLnJvdXRlcikgewogICAgICAgIFZ1ZS5wcm90b3R5cGUuJHJvdXRlciA9IHRoaXMuJG9wdGlvbnMucm91dGVyOwogICAgICB9CiAgICB9CiAgfSk7IC8vIOaMgui9vXJvdXRlci1saW5r57uE5Lu2CgogIFZ1ZS5jb21wb25lbnQoJ1JvdXRlckxpbmsnLCB7CiAgICBwcm9wczogewogICAgICB0bzogewogICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICB9CiAgICB9LAogICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoaCkgewogICAgICByZXR1cm4gaCgnYScsIHsKICAgICAgICBhdHRyczogewogICAgICAgICAgaHJlZjogIiMiLmNvbmNhdCh0aGlzLnRvKQogICAgICAgIH0KICAgICAgfSwgW3RoaXMuJHNsb3RzLmRlZmF1bHRdKTsKICAgIH0KICB9KTsgLy8g5oyC6L29cm91dGVyLXZpZXfnu4Tku7YKCiAgVnVlLmNvbXBvbmVudCgnUm91dGVyVmlldycsIHsKICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKGgpIHsKICAgICAgdmFyIF9yb3V0ZXIgPSB0aGlzLiRyb3V0ZXI7CgogICAgICB2YXIgX2NvbXBvbmVudCA9IF9yb3V0ZXIuJG9wdGlvbnMuZmluZChmdW5jdGlvbiAocm91dGVyKSB7CiAgICAgICAgcmV0dXJuIHJvdXRlci5wYXRoID09PSBfcm91dGVyLmN1cnJlbnQ7CiAgICAgIH0pLmNvbXBvbmVudHM7CgogICAgICByZXR1cm4gaChfY29tcG9uZW50KTsKICAgIH0KICB9KTsKfTsKCmV4cG9ydCBkZWZhdWx0IEtWdWVSb3V0ZXI7"},{"version":3,"sources":["/Users/hanyue/development/github/vue-components/src/package/kVueRouter/KVueRouter.js"],"names":["Vue","KVueRouter","options","$options","util","defineReactive","window","location","hash","slice","addEventListener","currentHash","bind","current","install","_Vue","mixin","beforeCreate","router","prototype","$router","component","props","to","type","String","required","render","h","attrs","href","$slots","default","_router","_component","find","path","components"],"mappings":";;;;AAAA;AACA;AACA;AACA;AAEA;AACA,IAAIA,GAAJ;;IAEMC,U;;;AACF,sBAAYC,OAAZ,EAAqB;AAAA;;AACjB,SAAKC,QAAL,GAAgBD,OAAhB,CADiB,CAEjB;AACA;;AACAF,IAAAA,GAAG,CAACI,IAAJ,CAASC,cAAT,CAAwB,IAAxB,EAA8B,SAA9B,EAAyCC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBC,KAArB,CAA2B,CAA3B,KAAiC,GAA1E,EAJiB,CAMjB;;AACAH,IAAAA,MAAM,CAACI,gBAAP,CAAwB,YAAxB,EAAsC,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAtC;AACAN,IAAAA,MAAM,CAACI,gBAAP,CAAwB,MAAxB,EAAgC,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAhC;AACH;;;;kCAEa;AACV,WAAKC,OAAL,GAAeP,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqBC,KAArB,CAA2B,CAA3B,CAAf;AACH;;;;;;AAGLR,UAAU,CAACa,OAAX,GAAqB,UAASC,IAAT,EAAe;AAChCf,EAAAA,GAAG,GAAGe,IAAN,CADgC,CAGhC;;AACAf,EAAAA,GAAG,CAACgB,KAAJ,CAAU;AACNC,IAAAA,YADM,0BACS;AACX;AACA,UAAI,KAAKd,QAAL,CAAce,MAAlB,EAA0B;AACtBlB,QAAAA,GAAG,CAACmB,SAAJ,CAAcC,OAAd,GAAwB,KAAKjB,QAAL,CAAce,MAAtC;AACH;AACJ;AANK,GAAV,EAJgC,CAahC;;AACAlB,EAAAA,GAAG,CAACqB,SAAJ,CAAc,YAAd,EAA4B;AACxBC,IAAAA,KAAK,EAAE;AACHC,MAAAA,EAAE,EAAE;AACAC,QAAAA,IAAI,EAAEC,MADN;AAEAC,QAAAA,QAAQ,EAAE;AAFV;AADD,KADiB;AAOxBC,IAAAA,MAPwB,kBAOjBC,CAPiB,EAOd;AACN,aAAOA,CAAC,CACJ,GADI,EAEJ;AACIC,QAAAA,KAAK,EAAE;AACHC,UAAAA,IAAI,aAAM,KAAKP,EAAX;AADD;AADX,OAFI,EAOJ,CACI,KAAKQ,MAAL,CAAYC,OADhB,CAPI,CAAR;AAWH;AAnBuB,GAA5B,EAdgC,CAoChC;;AACAhC,EAAAA,GAAG,CAACqB,SAAJ,CAAc,YAAd,EAA4B;AACxBM,IAAAA,MADwB,kBACjBC,CADiB,EACd;AACN,UAAIK,OAAO,GAAG,KAAKb,OAAnB;;AACA,UAAIc,UAAU,GAAGD,OAAO,CAAC9B,QAAR,CAAiBgC,IAAjB,CAAsB,UAAAjB,MAAM;AAAA,eAAIA,MAAM,CAACkB,IAAP,KAAgBH,OAAO,CAACpB,OAA5B;AAAA,OAA5B,EAAiEwB,UAAlF;;AACA,aAAOT,CAAC,CAACM,UAAD,CAAR;AACH;AALuB,GAA5B;AAOH,CA5CD;;AA8CA,eAAejC,UAAf","sourcesContent":["// 1. 构建一个实例\n// 2. 实例中监听地址变化, 并响应式的渲染界面\n// 3. 实例中install实现一个插件, 挂载到$router\n// 4. 实现router-link router-view两个组件 \n\n// 申明一个Vue变量, 防止import引入导致打包时把Vue重复打包进去\nlet Vue;\n\nclass KVueRouter {\n    constructor(options) {\n        this.$options = options;\n        // 借助vue响应式把它变成响应式数据\n        // this.current = '/';\n        Vue.util.defineReactive(this, 'current', window.location.hash.slice(1) || '/');\n\n        // 监听拿到地址并修改地址\n        window.addEventListener('hashchange', this.currentHash.bind(this));\n        window.addEventListener('load', this.currentHash.bind(this));\n    }\n\n    currentHash() {\n        this.current = window.location.hash.slice(1);\n    }\n}\n\nKVueRouter.install = function(_Vue) {\n    Vue = _Vue;\n\n    //使用mixin, 拿到实例后的相关属性并挂载到prototype上\n    Vue.mixin({\n        beforeCreate() {\n            // 拿到vue挂载到所有属性 以后可以使用this.$router调用实例\n            if (this.$options.router) {\n                Vue.prototype.$router = this.$options.router;\n            }\n        }\n    })\n\n    // 挂载router-link组件\n    Vue.component('RouterLink', {\n        props: {\n            to: {\n                type: String,\n                required: true\n            }\n        },\n        render(h) {\n            return h(\n                'a',\n                {\n                    attrs: {\n                        href: `#${this.to}`\n                    }\n                },\n                [\n                    this.$slots.default\n                ]\n            ) \n        }\n    })\n\n    // 挂载router-view组件\n    Vue.component('RouterView', {\n        render(h) {\n            let _router = this.$router;\n            let _component = _router.$options.find(router => router.path === _router.current).components;\n            return h(_component)\n        }\n    })\n}\n\nexport default KVueRouter"]}]}
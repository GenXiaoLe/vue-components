{"remainingRequest":"/Users/hanyue/development/github/vue-components/node_modules/babel-loader/lib/index.js!/Users/hanyue/development/github/vue-components/node_modules/eslint-loader/index.js??ref--13-0!/Users/hanyue/development/github/vue-components/src/package/kVuex/KModuleCllection.js","dependencies":[{"path":"/Users/hanyue/development/github/vue-components/src/package/kVuex/KModuleCllection.js","mtime":1579083067689},{"path":"/Users/hanyue/development/github/vue-components/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hanyue/development/github/vue-components/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hanyue/development/github/vue-components/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9Vc2Vycy9oYW55dWUvZGV2ZWxvcG1lbnQvZ2l0aHViL3Z1ZS1jb21wb25lbnRzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL1VzZXJzL2hhbnl1ZS9kZXZlbG9wbWVudC9naXRodWIvdnVlLWNvbXBvbmVudHMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKCnZhciBNb2R1bGUgPQovKiNfX1BVUkVfXyovCmZ1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBNb2R1bGUocmF3TW9kdWxlKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTW9kdWxlKTsKCiAgICB0aGlzLl9jaGlsZHJlbiA9IHt9OwogICAgdGhpcy5zdGF0ZSA9IHJhd01vZHVsZS5zdGF0ZSB8fCB7fTsKICAgIHRoaXMuX3Jhd01vZHVsZSA9IHJhd01vZHVsZTsKICB9CgogIF9jcmVhdGVDbGFzcyhNb2R1bGUsIFt7CiAgICBrZXk6ICJnZXRDaGlsZHJlbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2hpbGRyZW4oa2V5KSB7CiAgICAgIHJldHVybiB0aGlzLl9jaGlsZHJlbltrZXldOwogICAgfQogIH0sIHsKICAgIGtleTogImFkZENoaWxkcmVuIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRDaGlsZHJlbihrZXksIG1vZHVsZSkgewogICAgICB0aGlzLl9jaGlsZHJlbltrZXldID0gbW9kdWxlOwogICAgfQogIH0sIHsKICAgIGtleTogImZvckVhY2hNdXRhdGlvbnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZvckVhY2hNdXRhdGlvbnMoZm4pIHsKICAgICAgdGhpcy5mb3JFYWNoVmFsKHRoaXMuX3Jhd01vZHVsZS5tdXRhdGlvbnMsIGZ1bmN0aW9uIChrZXksIHZhbCkgewogICAgICAgIHJldHVybiBmbihrZXksIHZhbCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImZvckVhY2hBY3Rpb25zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmb3JFYWNoQWN0aW9ucyhmbikgewogICAgICBpZiAodGhpcy5fcmF3TW9kdWxlLmFjdGlvbnMpIHsKICAgICAgICB0aGlzLmZvckVhY2hWYWwodGhpcy5fcmF3TW9kdWxlLmFjdGlvbnMsIGZ1bmN0aW9uIChrZXksIHZhbCkgewogICAgICAgICAgcmV0dXJuIGZuKGtleSwgdmFsKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImZvckVhY2hDaGlsZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZm9yRWFjaENoaWxkKGZuKSB7CiAgICAgIHRoaXMuZm9yRWFjaFZhbCh0aGlzLl9jaGlsZHJlbiwgZnVuY3Rpb24gKGtleSwgdmFsKSB7CiAgICAgICAgcmV0dXJuIGZuKGtleSwgdmFsKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZm9yRWFjaFZhbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZm9yRWFjaFZhbCh2YWwsIGZuKSB7CiAgICAgIGlmICh2YWwpIHsKICAgICAgICBPYmplY3Qua2V5cyh2YWwpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgcmV0dXJuIGZuKGtleSwgdmFsW2tleV0pOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfV0pOwoKICByZXR1cm4gTW9kdWxlOwp9KCk7Cgp2YXIgTW9kdWxlQ2VsbGVjdGlvbiA9Ci8qI19fUFVSRV9fKi8KZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIE1vZHVsZUNlbGxlY3Rpb24ob3B0aW9ucykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1vZHVsZUNlbGxlY3Rpb24pOwoKICAgIHRoaXMucm9vdCA9IG51bGw7CiAgICB0aGlzLnJlZ2lzdGVyKFtdLCBvcHRpb25zKTsKICB9CgogIF9jcmVhdGVDbGFzcyhNb2R1bGVDZWxsZWN0aW9uLCBbewogICAga2V5OiAiZ2V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXQocGF0aCkgewogICAgICByZXR1cm4gcGF0aC5yZWR1Y2UoZnVuY3Rpb24gKG1vZHVsZSwga2V5KSB7CiAgICAgICAgcmV0dXJuIG1vZHVsZS5nZXRDaGlsZHJlbihrZXkpOwogICAgICB9LCB0aGlzLnJvb3QpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlZ2lzdGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWdpc3RlcihfcGF0aCwgX21vZHVsZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIHJhd01vZHVsZSA9IG5ldyBNb2R1bGUoX21vZHVsZSk7CgogICAgICBpZiAoX3BhdGgubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5yb290ID0gcmF3TW9kdWxlOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLmdldChfcGF0aC5zbGljZSgwLCAtMSkpOwogICAgICAgIHBhcmVudC5hZGRDaGlsZHJlbihfcGF0aFtfcGF0aC5sZW5ndGggLSAxXSwgcmF3TW9kdWxlKTsKICAgICAgfQoKICAgICAgaWYgKF9tb2R1bGUubW9kdWxlcykgewogICAgICAgIE9iamVjdC5rZXlzKF9tb2R1bGUubW9kdWxlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICBfdGhpcy5yZWdpc3RlcihfcGF0aC5jb25jYXQoa2V5KSwgX21vZHVsZS5tb2R1bGVzW2tleV0pOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfV0pOwoKICByZXR1cm4gTW9kdWxlQ2VsbGVjdGlvbjsKfSgpOwoKZXhwb3J0IGRlZmF1bHQgTW9kdWxlQ2VsbGVjdGlvbjs="},{"version":3,"sources":["/Users/hanyue/development/github/vue-components/src/package/kVuex/KModuleCllection.js"],"names":["Module","rawModule","_children","state","_rawModule","key","module","fn","forEachVal","mutations","val","actions","Object","keys","forEach","ModuleCellection","options","root","register","path","reduce","getChildren","_path","_module","length","parent","get","slice","addChildren","modules","concat"],"mappings":"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","sourcesContent":["const Module = class Module {\n    constructor(rawModule) {\n        this._children = {};\n        this.state = rawModule.state || {};\n        this._rawModule = rawModule;\n    }\n\n    getChildren(key) {\n        return this._children[key];\n    }\n\n    addChildren(key, module) {\n        this._children[key] = module;\n    }\n\n    forEachMutations(fn) {\n        this.forEachVal(this._rawModule.mutations, (key, val) => fn(key, val))\n    }\n\n    forEachActions(fn) {\n        if (this._rawModule.actions) {\n            this.forEachVal(this._rawModule.actions, (key, val) => fn(key, val))\n        }\n    }\n\n    forEachChild(fn) {\n        this.forEachVal(this._children, (key, val) => fn(key, val))\n    }\n\n    forEachVal(val, fn) {\n        if (val) {\n            Object.keys(val).forEach(key => fn(key, val[key]))\n        }\n    }\n}\n\nconst ModuleCellection = class ModuleCellection {\n    constructor(options) {\n        this.root = null;\n        this.register([], options)\n    }\n\n    get(path) {\n        return path.reduce((module, key) => {\n            return module.getChildren(key);\n        }, this.root);\n    }\n\n    register(_path, _module) {\n        let rawModule = new Module(_module);\n\n        if (_path.length === 0) {\n            this.root = rawModule;\n        } else {\n            let parent = this.get(_path.slice(0, -1));\n            parent.addChildren(_path[_path.length - 1], rawModule);\n        }\n\n        if (_module.modules) {\n            Object.keys(_module.modules).forEach(key => {\n                this.register(_path.concat(key), _module.modules[key]);\n            })\n        }\n    }\n}\n\nexport default ModuleCellection;"]}]}